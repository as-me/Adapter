!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require(void 0),require("weavedata"),require("React"),require("d3chart"),require("c3"),require("lodash")):"function"==typeof define&&define.amd?define([,"weavedata","React","d3chart","c3","lodash"],t):"object"==typeof exports?exports.AsmeAdapter=t(require(void 0),require("weavedata"),require("React"),require("d3chart"),require("c3"),require("lodash")):e.AsmeAdapter=t(e[void 0],e.weavedata,e.React,e.d3chart,e.c3,e.lodash)}(this,function(e,t,a,o,i,n){return function(e){function t(o){if(a[o])return a[o].exports;var i=a[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="js/",t(0)}([function(e,t,a){"use strict";t.AdapterInterface=a(1),t.hook={},t.hook.C3Hook=a(2),t.hook.D3Hook=a(3),t.peer={},t.peer.WeaveJSPeer=a(4),t.components={},t.components.AbstractTool=a(8),t.components.D3={},t.components.D3.ScatterPlotTool=a(9),t.components.C3={},t.components.C3.ScatterPlotTool=a(14),t.components.C3.WeaveC3=a(17),"undefined"==typeof window?(void 0).AdapterAPI=(void 0).AdapterAPI||{}:window.AdapterAPI=window.AdapterAPI||{},AdapterAPI.peer=new adapter.peer.WeaveJSInterface},function(e,t){"use strict";"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},function(){function e(){}var t=e.prototype;t.doSelection=function(e){console.log("this hook doesnt have Selection API")},t.doProbe=function(e){console.log("this hook doesnt have Probe API")},adapter.Interface=e}()},function(e,t){"use strict";"undefined"==typeof window?(void 0).adapter.hook=(void 0).adapter.hook||{}:window.adapter.hook=window.adapter.hook||{},function(){function e(e){adapter.Interface.call(this),e&&(this._chart=e),Object.defineProperty(this,"chart",{get:function(){return this._chart},set:function(e){this._chart=e}})}e.prototype=new adapter.Interface,e.prototype.constructor=e;var t=e.prototype;t.doProbe=function(e){if(!this.chart)return void console.error("Hook a C3 chart First");var t=Number(this.chart.keyColumnToYIndex[e]);this.chart.select(["y"],[t],!0)},t.doSelection=function(e){if(!this.chart)return void console.error("Hook a c3 chart First");if(void 0!==e?e.constructor!==Array&&console.log("Keys has to be an array "):console.log("keys(Array)  is required"),e.length>0){var t=e.map(function(e){return Number(this.chart.keyColumnToYIndex[e])}.bind(this));this.chart.select(["y"],t,!0)}else this.chart.unselect()},adapter.hook.C3Interface=e}()},function(e,t){"use strict";"undefined"==typeof window?(void 0).adapter.hook=(void 0).adapter.hook||{}:window.adapter.hook=window.adapter.hook||{},function(){function e(e){adapter.Interface.call(this),e&&(this._chart=e),Object.defineProperty(this,"chart",{get:function(){return this._chart},set:function(e){this._chart=e}}),this.dataSource}e.prototype=new adapter.Interface,e.prototype.constructor=e;var t=e.prototype;t.doSelection=function(e){return this.chart?void this.chart.select(e):(console.log(this),void console.log("Hook a d3 chart First"))},t.doProbe=function(e){return this.chart?void this.chart.probe(e):(console.log(this),void console.log("Hook a d3 chart First"))},t.setData=function(e,t){return this.chart?(this.dataSource=e,void this.chart.renderChart(t)):void console.log("Hook a d3 chart First")},adapter.hook.D3Interface=e}()},function(e,t,a){"use strict";a(5),a(6),a(7),"undefined"==typeof window?(void 0).adapter.peer=(void 0).adapter.peer||{}:window.adapter.peer=window.adapter.peer||{},function(){function e(){adapter.Interface.call(this),this.activeHook=null,Object.defineProperty(this,"probeKeysPath",{value:weave.path("defaultProbeKeySet").request("weavecore.LinkableVariable")}),Object.defineProperty(this,"selectionKeysPath",{value:weave.path("defaultSelectionKeySet").request("weavecore.LinkableVariable")}),Object.defineProperty(this,"filterKeysPath",{value:weave.path("defaultSubsetKeyFilter").request("weavecore.LinkableVariable")}),Object.defineProperty(this,"hooksPath",{value:weave.path("hooks").request("weavecore.LinkableHashMap")}),Object.defineProperty(this,"dataSourcesPath",{value:weave.path("dataSources").request("weavecore.LinkableHashMap")}),Object.defineProperty(this,"hooks",{value:WeaveAPI.globalHashMap.getObject("hooks")}),Object.defineProperty(this,"dataSources",{value:WeaveAPI.globalHashMap.getObject("dataSources")}),this.selectionKeysPath.state([]),this.probeKeysPath.state(null),this.selectionKeysPath.addCallback(t.bind(this),!1,!0),this.probeKeysPath.addCallback(a.bind(this),!1,!0),this.hooks.childListCallbacks.addImmediateCallback(this,o.bind(this),!1,!0)}function t(){var e=this.selectionKeysPath.getState();console.log(e);var t=this.hooks.getObjects();t.forEach(function(t,a){t.hook.chart!==this.activeHook&&(console.log(t.hook,e),t.hook.doSelection(e))}.bind(this)),this.activeHook=null}function a(){var e=this.probeKeysPath.getState(),t=this.hooks.getObjects();t.forEach(function(t,a){t.hook.chart!==this.activeHook&&t.hook.doProbe(e)}.bind(this)),this.activeHook=null}function o(){if(this.hooks.childListCallbacks.lastObjectAdded){var e=this.hooks.childListCallbacks.lastObjectAdded;e.sessionData.dataSourceWatcher.targetPath=WeaveAPI.SessionManager.getPath(WeaveAPI.globalHashMap,this.dataSources.getObject(this.dataSources.getNames()[0]))}if(this.hooks.childListCallbacks.lastObjectRemoved){var t=this.hooks.childListCallbacks.lastObjectRemoved;t.sessionData.dataSourceWatcher.dispose(),WeaveAPI.SessionManager.disposeObject(t.sessionData),WeaveAPI.SessionManager.disposeObject(t)}}e.prototype=new adapter.Interface,e.prototype.constructor=e;var i=e.prototype;i.doSelection=function(e){e=e.length>0?e:[],this.selectionKeysPath.state(e)},i.doProbe=function(e){e=void 0!==e?e:null,this.probeKeysPath.state(e)},i.requestHook=function(e,t){return this.hooks.requestObject(e,t,!1)},i.removeHook=function(e){return this.hooks.removeObject(e)},i.requestDataSource=function(e,t){return this.dataSources.requestObject(e,t,!1)},i.removeDataSource=function(e){return this.dataSources.removeObject(e)},adapter.peer.WeaveJSInterface=e}()},function(e,t,a){"use strict";a(6),"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},"undefined"==typeof window?(void 0).adapter.session=(void 0).adapter.session||{}:window.adapter.session=window.adapter.session||{},function(){function e(){Object.defineProperty(this,"sessionable",{value:!0}),Object.defineProperty(this,"IDataSource",{value:!0}),Object.defineProperty(this,"data",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableVariable([]),t.bind(this))}),this.columns=[]}function t(){var e=this.data.getSessionState();if(e.length){var t=e[0];for(var a in t)this.columns.push(a)}}Object.defineProperty(e,"NS",{value:"adapter.session"}),Object.defineProperty(e,"CLASS_NAME",{value:"DataSource"});var a=e.prototype;a.getRecords=function(){return this.data.getSessionState()},adapter.session.DataSource=e}()},function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=function(){function e(t){a(this,e),this.props=t,this.element=t.element,this.toolPath=t.toolPath}return o(e,[{key:"_getElementSize",value:function(){return{width:this.element.clientWidth,height:this.element.clientHeight}}},{key:"resize",value:function(){}},{key:"destroy",value:function(){}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var i=a(10),n=o(i),s=a(11),r=o(s);a(13),a(6),"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},"undefined"==typeof window?(void 0).adapter.libs=(void 0).adapter.libs||{}:window.adapter.libs=window.adapter.libs||{},"undefined"==typeof window?(void 0).adapter.libs.d3=(void 0).adapter.libs.d3||{}:window.adapter.libs.d3=window.adapter.libs.d3||{},function(){function e(){Object.defineProperty(this,"sessionable",{value:!0}),Object.defineProperty(this,"library",{value:"d3"}),Object.defineProperty(this,"sessionData",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new adapter.session.ScatterPlot)}),Object.defineProperty(this,"hook",{value:new adapter.hook.D3Interface})}Object.defineProperty(e,"NS",{value:"adapter.libs.d3"}),Object.defineProperty(e,"CLASS_NAME",{value:"ScatterPlot"});var t=e.prototype;t.createUI=function(e,t,a){this.ui||Object.defineProperty(this,"ui",{value:n["default"].createElement(r["default"],{sessionData:this.sessionData,padding:{top:e.top,bottom:e.bottom,left:e.left,right:e.right},size:{width:t.width,height:t.height},onProbe:a.onProbe,onSelect:a.onSelect,hook:this.hook})})},adapter.libs.d3.ScatterPlot=e}()},function(e,t){e.exports=a},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=function(e,t,a){for(var o=!0;o;){var i=e,n=t,s=a;r=c=l=void 0,o=!1,null===i&&(i=Function.prototype);var r=Object.getOwnPropertyDescriptor(i,n);if(void 0!==r){if("value"in r)return r.value;var l=r.get;return void 0===l?void 0:l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=n,a=s,o=!0}};a(12);var l=a(10),c=o(l),h=function(e){function t(e){i(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.sessionData=e.sessionData,this.hook=e.hook,this.state=this.sessionData.getSessionStateValue(),this.initialize=this.initialize.bind(this),this._setReactState=this._setReactState.bind(this)}return n(t,e),s(t,[{key:"initialize",value:function(){var e=this.state.dataSourcePath;if(e&&e.length>0){var t={container:c["default"].findDOMNode(this),margin:this.props.padding?this.props.padding:{},size:this.props.size?this.props.size:{},interactions:{onProbe:this.props.onProbe,onSelect:this.props.onSelect}};this.hook.chart=new d3Chart.Scatterplot,this.hook.chart.create(t);var a=this.state.dataSourcePath,o=WeaveAPI.SessionManager.getObject(WeaveAPI.globalHashMap,a).data.getSessionState(),i={columns:{x:this.state.xAxis,y:this.state.yAxis},records:o};console.log("d3",o),this.hook.chart.renderChart(i)}else console.warn("No data")}},{key:"componentDidMount",value:function(){this.initialize(),WeaveAPI.SessionManager.getCallbackCollection(this.sessionData).addGroupedCallback(this,this._setReactState,!0)}},{key:"_setReactState",value:function(){this.hook.chart||this.initialize(),this.setState(this.sessionData.getSessionStateValue())}},{key:"componentDidUpdate",value:function(e,t){if(this.hook.chart){var a=this.state.dataSourcePath,o=WeaveAPI.SessionManager.getObject(WeaveAPI.globalHashMap,a).data.getSessionState(),i={columns:{x:this.state.xAxis,y:this.state.yAxis},records:o};this.hook.chart.renderChart(i)}}},{key:"componentWillUnmount",value:function(){WeaveAPI.SessionManager.getCallbackCollection(this.sessionData).removeCallback(this._setReactState)}},{key:"render",value:function(){var e=this.state.dataSourcePath;return e&&e.length>0?c["default"].createElement("div",{className:"Chart"}," "):c["default"].createElement("div",{className:"Chart"}," ",c["default"].createElement("h2",null," ",this.sessionData.dataSourceName,"dont have data ")," ")}}]),t}(c["default"].Component);e.exports=h},function(e,t){e.exports=o},function(e,t,a){"use strict";a(6),"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},"undefined"==typeof window?(void 0).adapter.session=(void 0).adapter.session||{}:window.adapter.session=window.adapter.session||{},function(){function e(){Object.defineProperty(this,"sessionable",{value:!0}),Object.defineProperty(this,"xAxis",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableString(""))}),Object.defineProperty(this,"yAxis",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableString(""))}),Object.defineProperty(this,"keyColumn",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableString(""))}),Object.defineProperty(this,"dataSourcePath",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableVariable([]))}),Object.defineProperty(this,"_dataSourceWatcher",{value:new weavecore.LinkableWatcher}),Object.defineProperty(this,"dataSourceWatcher",{get:function(){return this._dataSourceWatcher}}),WeaveAPI.SessionManager.getCallbackCollection(this.dataSourceWatcher).addImmediateCallback(this,this._updateDataSourcePath.bind(this),!0)}Object.defineProperty(e,"NS",{value:"adapter.session"}),Object.defineProperty(e,"CLASS_NAME",{value:"ScatterPlot"});var t=e.prototype;t.getSessionStateValue=function(){return{xAxis:this.xAxis.value,yAxis:this.yAxis.value,dataSourcePath:this.dataSourcePath.getSessionState()}},t._updateDataSourcePath=function(){var e=this.dataSourceWatcher.targetPath;this.dataSourcePath.setSessionState(e)},t.getColumnProperties=function(){return["xAxis","yAxis"]},t.getXAxisState=function(){return{xAxis:this.xAxis.value}},t.getYAxisState=function(){return{yAxis:this.yAxis.value}},t.getDataSourceState=function(){return{dataSourcePath:this.dataSourcePath.getSessionState()}},adapter.session.ScatterPlot=e}()},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var i=a(10),n=o(i),s=a(15),r=o(s);a(13),a(6),"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},"undefined"==typeof window?(void 0).adapter.libs=(void 0).adapter.libs||{}:window.adapter.libs=window.adapter.libs||{},"undefined"==typeof window?(void 0).adapter.libs.c3=(void 0).adapter.libs.c3||{}:window.adapter.libs.c3=window.adapter.libs.c3||{},function(){function e(){Object.defineProperty(this,"sessionable",{value:!0}),Object.defineProperty(this,"ns",{value:"adapter.libs.c3"}),Object.defineProperty(this,"library",{value:"c3"}),Object.defineProperty(this,"sessionData",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new adapter.session.ScatterPlot)}),Object.defineProperty(this,"hook",{value:new adapter.hook.C3Interface})}Object.defineProperty(e,"NS",{value:"adapter.libs.c3"}),Object.defineProperty(e,"CLASS_NAME",{value:"ScatterPlot"});var t=e.prototype;t.createUI=function(e,t,a){this.ui||Object.defineProperty(this,"ui",{value:n["default"].createElement(r["default"],{sessionData:this.sessionData,padding:{top:e.top,bottom:e.bottom,left:e.left,right:e.right},size:{width:t.width,height:t.height},height:t.height,onProbe:a.onProbe,onSelect:a.onSelect,hook:this.hook})})},adapter.libs.c3.ScatterPlot=e}()},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=function(e,t,a){for(var o=!0;o;){var i=e,n=t,s=a;r=c=l=void 0,o=!1,null===i&&(i=Function.prototype);var r=Object.getOwnPropertyDescriptor(i,n);if(void 0!==r){if("value"in r)return r.value;var l=r.get;return void 0===l?void 0:l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=n,a=s,o=!0}},l=a(16),c=o(l),h=a(10),d=o(h),u=function(e){function t(e){i(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.sessionData=e.sessionData,this.hook=e.hook,this.state=this.sessionData.getSessionStateValue(),this.initialize=this.initialize.bind(this),this._setReactState=this._setReactState.bind(this),this.getColumns=this.getColumns.bind(this)}return n(t,e),s(t,[{key:"initialize",value:function(){var e=this,t=this.state.dataSourcePath;if(t&&t.length>0){var a={bindto:d["default"].findDOMNode(this),padding:this.props.padding?this.props.padding:{},size:this.props.size?this.props.size:{},data:{x:"x",y:"y",columns:[],type:"scatter",selection:{enabled:!0,multiple:!0,draggable:!0},onselected:function(){var t=this.selected();if(t.constructor===Array){var a=t.map(function(t){return e.hook.chart.yIndexToKeyColumn[t.index]});e.props.onSelect.callback.call(this,a)}else e.props.onSelect.callback.call(this,e.hook.chart.yIndexToKeyColumn[t.index])},onmouseover:function(t){e.props.onProbe.callback.call(this,e.hook.chart.yIndexToKeyColumn[t.index])}},axis:{x:{label:this.state.xAxis,tick:{fit:!1}},y:{label:this.state.yAxis}},onmouseout:function(){WeaveAPI.globalHashMap.getObject("defaultSelectionKeySet").setSessionState([])},legend:{show:!1}};this.hook.chart=c["default"].generate(a);var o=this.getColumns(this.state.xAxis,this.state.yAxis);this.hook.chart.load({columns:o})}else console.warn("No Data Found")}},{key:"componentDidMount",value:function(){this.initialize(),WeaveAPI.SessionManager.getCallbackCollection(this.sessionData).addGroupedCallback(this,this._setReactState,!0)}},{key:"_setReactState",value:function(){this.hook.chart||this.initialize(),this.setState(this.sessionData.getSessionStateValue())}},{key:"getColumns",value:function(e,t){this.hook.chart.keyColumnToYIndex={},this.hook.chart.yIndexToKeyColumn={};var a=this.state.dataSourcePath,o=WeaveAPI.SessionManager.getObject(WeaveAPI.globalHashMap,a).data.getSessionState(),i=!1;o[0].hasOwnProperty("index")||(console.warn("Its a good practise to set key column. failing to do so, will create a index as key column"),i=!0);var n=[[],[]],s=this.sessionData.keyColumn.value=this.sessionData.keyColumn.value?this.sessionData.keyColumn.value:"index";return console.log("Key Column:",s),n[0].push("x"),n[1].push("y"),o.forEach(function(a,o){i&&(a.index=o),"string"==typeof a[e]?isNaN(Number(a[e]))?n[0].push(a.index):n[0].push(Number(a[e])):n[0].push(a[e]),"string"==typeof a[t]?isNaN(Number(a[t]))?n[1].push(a.index):n[1].push(Number(a[t])):n[1].push(a[t]),this.hook.chart.keyColumnToYIndex[a[s]]=o,this.hook.chart.yIndexToKeyColumn[o]=a[s]}.bind(this)),console.log(n),n}},{key:"componentDidUpdate",value:function(e,t){if(this.hook.chart){this.hook.chart.axis.labels({x:this.state.xAxis,y:this.state.yAxis});var a=this.getColumns(this.state.xAxis,this.state.yAxis);this.hook.chart.load({columns:a})}}},{key:"componentWillUnmount",value:function(){WeaveAPI.SessionManager.getCallbackCollection(this.sessionData).removeCallback(this._setReactState)}},{key:"render",value:function(){var e=this.sessionData.dataSourceWatcher.target;return e?d["default"].createElement("div",{className:"Chart"}," "):d["default"].createElement("div",{className:"Chart"}," ",d["default"].createElement("h2",null," No Data ")," ")}}]),t}(d["default"].Component);e.exports=u},function(e,t){e.exports=i},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a={};return t.forEach(function(t){a[t]={min:f["default"].min(f["default"].pluck(e,t)),max:f["default"].max(f["default"].pluck(e,t))}}),e.map(function(e){var o={};return t.forEach(function(t){var i=a[t].min,n=a[t].max;return i&&n&&n-i!==0?void(e[t]?o[t]=(e[t]-i)/(n-i):o[t]=null):0}),o})}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(e,t,a){for(var o=!0;o;){var i=e,n=t,s=a;r=c=l=void 0,o=!1,null===i&&(i=Function.prototype);var r=Object.getOwnPropertyDescriptor(i,n);if(void 0!==r){if("value"in r)return r.value;var l=r.get;return void 0===l?void 0:l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=n,a=s,o=!0}},c=a(8),h=o(c),d=a(16),u=o(d),p=a(18),f=o(p),v=function(e){function t(e){var a=this;i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._visualizationPath=this.toolPath.push("children","visualization"),this._plotterPath=this.toolPath.pushPlotter("plot"),this._dataXPath=this._plotterPath.push("dataX"),this._dataYPath=this._plotterPath.push("dataY"),this._xAxisPath=this.toolPath.pushPlotter("xAxis"),this._yAxisPath=this.toolPath.pushPlotter("yAxis"),this._fillStylePath=this._plotterPath.push("fill"),this._lineStylePath=this._plotterPath.push("line"),this._sizeByPath=this._plotterPath.push("sizeBy"),this.plotterState={},this._plotterPath.addCallback(function(){a.plotterState=a._plotterPath.getState(),a._dataChanged()},!0),this._c3Options={bindto:this.element,data:{rows:[],x:"x",xSort:!1,type:"scatter",selection:{enabled:!0,multiple:!0,draggable:!0},color:function(e,t){if(a.records&&t.hasOwnProperty("index")){var o=a.records[t.index];return o&&o.fill&&o.fill.color?o.fill.color:"#C0CDD1"}return"#C0CDD1"},onselected:function(e){e&&e.hasOwnProperty("index")&&a.toolPath.selection_keyset.addKeys([a.indexToKey[e.index]])},onunselected:function(e){e&&e.hasOwnProperty("index")&&a.toolPath.selection_keyset.removeKeys([a.indexToKey[e.index]])},onmouseover:function(e){e&&e.hasOwnProperty("index")&&a.toolPath.probe_keyset.setKeys([a.indexToKey[e.index]])},onmouseout:function(e){e&&e.hasOwnProperty("index")&&a.toolPath.probe_keyset.setKeys([])}},legend:{show:!1},axis:{x:{label:{position:"outer-center"},tick:{fit:!1}},y:{label:{position:"outer-middle"},tick:{fit:!1}}},grid:{x:{show:!0},y:{show:!0}},point:{r:function(e){return e.hasOwnProperty("index")?a.normalizedPointSizes[e.index]:void 0}},onrendered:this._updateStyle.bind(this)},this.chart=u["default"].generate(this._c3Options),this._setupCallbacks()}return n(t,e),r(t,[{key:"_setupCallbacks",value:function(){var e=f["default"].debounce(this._dataChanged.bind(this),100);[this._dataXPath,this._dataYPath,this._sizeByPath,this._fillStylePath,this._lineStylePath].forEach(function(t){t.addCallback(e,!0,!1)});var t=f["default"].debounce(this._axisChanged.bind(this),100);[this._dataXPath,this._dataYPath,this._xAxisPath,this._yAxisPath].forEach(function(e){e.addCallback(t,!0,!1)}),this.toolPath.selection_keyset.addCallback(this._selectionKeysChanged.bind(this),!0,!1),this.toolPath.probe_keyset.addCallback(this._probedKeysChanged.bind(this),!0,!1)}},{key:"resize",value:function(){this.chart.resize(this._getElementSize())}},{key:"_axisChanged",value:function(){this.busy||this.chart.axis.labels({x:this._xAxisPath.push("overrideAxisName").getState()||this._dataXPath.getValue("weavedata.ColumnUtils.getTitle(this)"),y:this._yAxisPath.push("overrideAxisName").getState()||this._dataYPath.getValue("weavedata.ColumnUtils.getTitle(this)")})}},{key:"_dataChanged",value:function(){var e=this;if(!this.busy){var t={point:{x:this._dataXPath,y:this._dataYPath},size:this._sizeByPath,fill:{alpha:this._fillStylePath.push("alpha"),color:this._fillStylePath.push("color")},line:{alpha:this._lineStylePath.push("alpha"),color:this._lineStylePath.push("color"),caps:this._lineStylePath.push("caps")}};this.records=f["default"].sortByOrder(this._plotterPath.retrieveRecords(t,this._plotterPath.push("filteredKeySet")),["size","id"],["desc","asc"]),this.keyToIndex={},this.indexToKey={},this.records.forEach(function(t,a){e.keyToIndex[t.id]=a,e.indexToKey[a]=t.id}),this.normalizedRecords=s(this.records,["size"]),this.normalizedPointSizes=this.normalizedRecords.map(function(t){if(e.plotterState&&e.plotterState.sizeBy.length){var a=e.plotterState.minScreenRadius,o=e.plotterState.maxScreenRadius;return(t&&t.size?a+t.size*(o-a):e.plotterState.defaultScreenRadius)||1}return e.plotterState.defaultScreenRadius||1}),this._axisChanged(),this.busy=!0,this.chart.load({data:f["default"].pluck(this.records,"point"),unload:!0,done:function(){e.busy=!1}})}}},{key:"_selectionKeysChanged",value:function(){var e=this,t=this.toolPath.selection_keyset.getKeys(),a=t.map(function(t){return Number(e.keyToIndex[t])});this.chart.select("y",a,!0)}},{key:"_probedKeysChanged",value:function(){}},{key:"_updateStyle",value:function(){d3.selectAll(this.element).selectAll("circle").style("opacity",1).style("stroke","black").style("stroke-opacity",.5)}},{key:"destroy",value:function(){this.chart.destroy()}}]),t}(h["default"]);t["default"]=v,e.exports=t["default"]},function(e,t){e.exports=n}])});
//# sourceMappingURL=asme-adapter.min.js.map
