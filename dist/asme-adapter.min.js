!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require(void 0),require("React"),require("d3chart"),require("c3")):"function"==typeof define&&define.amd?define([,"React","d3chart","c3"],t):"object"==typeof exports?exports.AsmeAdapter=t(require(void 0),require("React"),require("d3chart"),require("c3")):e.AsmeAdapter=t(e[void 0],e.React,e.d3chart,e.c3)}(this,function(e,t,i,a){return function(e){function t(a){if(i[a])return i[a].exports;var o=i[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="js/",t(0)}([function(e,t,i){"use strict";t.AdapterInterface=i(1),t.hook={},t.hook.C3Hook=i(2),t.hook.D3Hook=i(3),t.peer={},t.peer.WeaveJSPeer=i(4),t.components={},t.components.D3={},t.components.D3.ScatterPlotTool=i(7),t.components.C3={},t.components.C3.ScatterPlotTool=i(12),"undefined"==typeof window?(void 0).AdapterAPI=(void 0).AdapterAPI||{}:window.AdapterAPI=window.AdapterAPI||{},AdapterAPI.peer=new adapter.peer.WeaveJSInterface},function(e,t){"use strict";"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},function(){function e(){}var t=e.prototype;t.doSelection=function(e){console.log("this hook doesnt have Selection API")},t.doProbe=function(e){console.log("this hook doesnt have Probe API")},adapter.Interface=e}()},function(e,t){"use strict";"undefined"==typeof window?(void 0).adapter.hook=(void 0).adapter.hook||{}:window.adapter.hook=window.adapter.hook||{},function(){function e(e){adapter.Interface.call(this),e&&(this._chart=e),Object.defineProperty(this,"chart",{get:function(){return this._chart},set:function(e){this._chart=e}})}e.prototype=new adapter.Interface,e.prototype.constructor=e;var t=e.prototype;t.doProbe=function(e){if(!this.chart)return void console.error("Hook a C3 chart First");var t=Number(this.chart.keyColumnToYIndex[e]);this.chart.select(["y"],[t],!0)},t.doSelection=function(e){if(!this.chart)return void console.error("Hook a c3 chart First");if(void 0!==e?e.constructor!==Array&&console.log("Keys has to be an array "):console.log("keys(Array)  is required"),e.length>0){var t=e.map(function(e){return Number(this.chart.keyColumnToYIndex[e])}.bind(this));this.chart.select(["y"],t,!0)}else this.chart.unselect()},adapter.hook.C3Interface=e}()},function(e,t){"use strict";"undefined"==typeof window?(void 0).adapter.hook=(void 0).adapter.hook||{}:window.adapter.hook=window.adapter.hook||{},function(){function e(e){adapter.Interface.call(this),e&&(this._chart=e),Object.defineProperty(this,"chart",{get:function(){return this._chart},set:function(e){this._chart=e}}),this.dataSource}e.prototype=new adapter.Interface,e.prototype.constructor=e;var t=e.prototype;t.doSelection=function(e){return this.chart?void this.chart.select(e):(console.log(this),void console.log("Hook a d3 chart First"))},t.doProbe=function(e){return this.chart?void this.chart.probe(e):(console.log(this),void console.log("Hook a d3 chart First"))},t.setData=function(e,t){return this.chart?(this.dataSource=e,void this.chart.renderChart(t)):void console.log("Hook a d3 chart First")},adapter.hook.D3Interface=e}()},function(e,t,i){"use strict";i(5),i(6),"undefined"==typeof window?(void 0).adapter.peer=(void 0).adapter.peer||{}:window.adapter.peer=window.adapter.peer||{},function(){function e(){adapter.Interface.call(this),this.activeHook=null,Object.defineProperty(this,"probeKeys",{value:WeaveAPI.globalHashMap.requestObject("probeKeys",weavecore.LinkableVariable,!1)}),Object.defineProperty(this,"selectionKeys",{value:WeaveAPI.globalHashMap.requestObject("selectionKeys",weavecore.LinkableVariable,!1)}),Object.defineProperty(this,"hooks",{value:WeaveAPI.globalHashMap.requestObject("hooks",weavecore.LinkableHashMap,!1)}),Object.defineProperty(this,"dataSources",{value:WeaveAPI.globalHashMap.requestObject("dataSources",weavecore.LinkableHashMap,!1)}),this.selectionKeys.setSessionState([]),this.probeKeys.setSessionState(null),this.selectionKeys.addImmediateCallback(this,t.bind(this)),this.probeKeys.addImmediateCallback(this,i.bind(this)),this.hooks.childListCallbacks.addImmediateCallback(this,a.bind(this))}function t(){var e=this.selectionKeys.getSessionState(),t=this.hooks.getObjects();t.forEach(function(t,i){t.hook.chart!=this.activeHook&&t.hook.doSelection(e)}.bind(this)),this.activeHook=null}function i(){var e=this.probeKeys.getSessionState(),t=this.hooks.getObjects();t.forEach(function(t,i){t.hook.chart!=this.activeHook&&t.hook.doProbe(e)}.bind(this)),this.activeHook=null}function a(){if(this.hooks.childListCallbacks.lastObjectAdded){var e=this.hooks.childListCallbacks.lastObjectAdded;e.sessionData.dataSourceWatcher.targetPath=WeaveAPI.SessionManager.getPath(WeaveAPI.globalHashMap,this.dataSources.getObject(this.dataSources.getNames()[0]))}if(this.hooks.childListCallbacks.lastObjectRemoved){var t=this.hooks.childListCallbacks.lastObjectRemoved;t.sessionData.dataSourceWatcher.dispose(),WeaveAPI.SessionManager.disposeObject(t.sessionData),WeaveAPI.SessionManager.disposeObject(t)}}e.prototype=new adapter.Interface,e.prototype.constructor=e;var o=e.prototype;o.doSelection=function(e){e=e.length>0?e:[],this.selectionKeys.setSessionState(e)},o.doProbe=function(e){e=void 0!==e?e:null,this.probeKeys.setSessionState(e)},o.requestHook=function(e,t){return this.hooks.requestObject(e,t,!1)},o.removeHook=function(e){return this.hooks.removeObject(e)},o.requestDataSource=function(e,t){return this.dataSources.requestObject(e,t,!1)},o.removeDataSource=function(e){return this.dataSources.removeObject(e)},adapter.peer.WeaveJSInterface=e}()},function(e,t,i){"use strict";i(6),"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},"undefined"==typeof window?(void 0).adapter.session=(void 0).adapter.session||{}:window.adapter.session=window.adapter.session||{},function(){function e(){Object.defineProperty(this,"sessionable",{value:!0}),Object.defineProperty(this,"IDataSource",{value:!0}),Object.defineProperty(this,"data",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableVariable([]),t.bind(this))}),this.columns=[]}function t(){var e=this.data.getSessionState();if(e.length){var t=e[0];for(var i in t)this.columns.push(i)}}Object.defineProperty(e,"NS",{value:"adapter.session"}),Object.defineProperty(e,"CLASS_NAME",{value:"DataSource"});e.prototype;adapter.session.DataSource=e}()},function(t,i){t.exports=e},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var o=i(8),s=a(o),n=i(9),r=a(n);i(11),i(6),"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},"undefined"==typeof window?(void 0).adapter.libs=(void 0).adapter.libs||{}:window.adapter.libs=window.adapter.libs||{},"undefined"==typeof window?(void 0).adapter.libs.d3=(void 0).adapter.libs.d3||{}:window.adapter.libs.d3=window.adapter.libs.d3||{},function(){function e(){Object.defineProperty(this,"sessionable",{value:!0}),Object.defineProperty(this,"library",{value:"d3"}),Object.defineProperty(this,"sessionData",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new adapter.session.ScatterPlot)}),Object.defineProperty(this,"hook",{value:new adapter.hook.D3Interface})}Object.defineProperty(e,"NS",{value:"adapter.libs.d3"}),Object.defineProperty(e,"CLASS_NAME",{value:"ScatterPlot"});var t=e.prototype;t.createUI=function(e,t,i){this.ui||Object.defineProperty(this,"ui",{value:s["default"].createElement(r["default"],{sessionData:this.sessionData,padding:{top:e.top,bottom:e.bottom,left:e.left,right:e.right},size:{width:t.width,height:t.height},onProbe:i.onProbe,onSelect:i.onSelect,hook:this.hook})})},adapter.libs.d3.ScatterPlot=e}()},function(e,i){e.exports=t},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(e,t,i){for(var a=!0;a;){var o=e,s=t,n=i;r=h=c=void 0,a=!1,null===o&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,s);if(void 0!==r){if("value"in r)return r.value;var c=r.get;return void 0===c?void 0:c.call(n)}var h=Object.getPrototypeOf(o);if(null===h)return void 0;e=h,t=s,i=n,a=!0}};i(10);var c=i(8),h=a(c),d=function(e){function t(e){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.sessionData=e.sessionData,this.hook=e.hook,this.state=this.sessionData.getSessionStateValue(),this.initialize=this.initialize.bind(this),this._setXAxis=this._setXAxis.bind(this),this._setYAxis=this._setYAxis.bind(this),this._setData=this._setData.bind(this),this.isXAxisChanged=!1,this.isYAxisChanged=!1,this.isDataChanged=!1}return s(t,e),n(t,[{key:"initialize",value:function(){var e=this.sessionData.dataSourceWatcher.target;if(e){var t={container:h["default"].findDOMNode(this),margin:this.props.padding?this.props.padding:{},size:this.props.size?this.props.size:{},interactions:{onProbe:this.props.onProbe,onSelect:this.props.onSelect}};this.hook.chart=new d3Chart.Scatterplot,this.hook.chart.create(t)}else console.warn("No data")}},{key:"componentDidMount",value:function(){this.initialize(),WeaveAPI.SessionManager.getCallbackCollection(this.sessionData.dataSourceWatcher).addGroupedCallback(this,this._setData,!0),this.sessionData.xAxis.addImmediateCallback(this,this._setXAxis),this.sessionData.yAxis.addImmediateCallback(this,this._setYAxis)}},{key:"_setXAxis",value:function(){this.isXAxisChanged=!0,this.setState(this.sessionData.getXAxisState())}},{key:"_setYAxis",value:function(){this.isYAxisChanged=!0,this.setState(this.sessionData.getYAxisState())}},{key:"_setData",value:function(){this.isDataChanged=!0,this.hook.chart||this.initialize(),this.setState(this.sessionData.getDataSourceState())}},{key:"componentDidUpdate",value:function(e,t){if(this.hook.chart&&(this.isXAxisChanged&&(this.hook.chart.setXAttribute(this.state.xAxis),this.isXAxisChanged=!1),this.isYAxisChanged&&(this.hook.chart.setYAttribute(this.state.yAxis),this.isYAxisChanged=!1),this.isDataChanged)){var i=this.sessionData.dataSourceWatcher.target.data.getSessionState(),a={columns:{x:this.state.xAxis,y:this.state.yAxis},records:i};this.hook.chart.renderChart(a),this.isDataChanged=!1}}},{key:"componentWillUnmount",value:function(){this.sessionData.xAxis.removeCallback(this._setXAxis),this.sessionData.yAxis.removeCallback(this._setYAxis),this.sessionData.dataSourceWatcher.dispose()}},{key:"render",value:function(){var e=this.sessionData.dataSourceWatcher.target;return e?h["default"].createElement("div",{className:"Chart"}," "):h["default"].createElement("div",{className:"Chart"}," ",h["default"].createElement("h2",null," ",this.sessionData.dataSourceName,"dont have data ")," ")}}]),t}(h["default"].Component);e.exports=d},function(e,t){e.exports=i},function(e,t,i){"use strict";i(6),"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},"undefined"==typeof window?(void 0).adapter.session=(void 0).adapter.session||{}:window.adapter.session=window.adapter.session||{},function(){function e(){Object.defineProperty(this,"sessionable",{value:!0}),Object.defineProperty(this,"xAxis",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableString(""))}),Object.defineProperty(this,"yAxis",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableString(""))}),Object.defineProperty(this,"keyColumn",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableString(""))}),Object.defineProperty(this,"_dataSourceWatcher",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new weavecore.LinkableWatcher)}),Object.defineProperty(this,"dataSourceWatcher",{get:function(){return this._dataSourceWatcher}})}Object.defineProperty(e,"NS",{value:"adapter.session"}),Object.defineProperty(e,"CLASS_NAME",{value:"ScatterPlot"});var t=e.prototype;t.getSessionStateValue=function(){return{xAxis:this.xAxis.value,yAxis:this.yAxis.value}},t.getColumnProperties=function(){return["xAxis","yAxis"]},t.getXAxisState=function(){return{xAxis:this.xAxis.value}},t.getYAxisState=function(){return{yAxis:this.yAxis.value}},t.getDataSourceState=function(){return{dataSource:this._dataSourceWatcher.target}},adapter.session.ScatterPlot=e}()},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var o=i(8),s=a(o),n=i(13),r=a(n);i(11),i(6),"undefined"==typeof window?(void 0).adapter=(void 0).adapter||{}:window.adapter=window.adapter||{},"undefined"==typeof window?(void 0).adapter.libs=(void 0).adapter.libs||{}:window.adapter.libs=window.adapter.libs||{},"undefined"==typeof window?(void 0).adapter.libs.c3=(void 0).adapter.libs.c3||{}:window.adapter.libs.c3=window.adapter.libs.c3||{},function(){function e(){Object.defineProperty(this,"sessionable",{value:!0}),Object.defineProperty(this,"ns",{value:"adapter.libs.c3"}),Object.defineProperty(this,"library",{value:"c3"}),Object.defineProperty(this,"sessionData",{value:WeaveAPI.SessionManager.registerLinkableChild(this,new adapter.session.ScatterPlot)}),Object.defineProperty(this,"hook",{value:new adapter.hook.C3Interface})}Object.defineProperty(e,"NS",{value:"adapter.libs.c3"}),Object.defineProperty(e,"CLASS_NAME",{value:"ScatterPlot"});var t=e.prototype;t.createUI=function(e,t,i){this.ui||Object.defineProperty(this,"ui",{value:s["default"].createElement(r["default"],{sessionData:this.sessionData,padding:{top:e.top,bottom:e.bottom,left:e.left,right:e.right},size:{width:t.width,height:t.height},height:t.height,onProbe:i.onProbe,onSelect:i.onSelect,hook:this.hook})})},adapter.libs.c3.ScatterPlot=e}()},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(e,t,i){for(var a=!0;a;){var o=e,s=t,n=i;r=h=c=void 0,a=!1,null===o&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,s);if(void 0!==r){if("value"in r)return r.value;var c=r.get;return void 0===c?void 0:c.call(n)}var h=Object.getPrototypeOf(o);if(null===h)return void 0;e=h,t=s,i=n,a=!0}},c=i(14),h=a(c),d=i(8),l=a(d),u=function(e){function t(e){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.sessionData=e.sessionData,this.hook=e.hook,this.state=this.sessionData.getSessionStateValue(),this.initialize=this.initialize.bind(this),this._setXAxis=this._setXAxis.bind(this),this._setYAxis=this._setYAxis.bind(this),this._setData=this._setData.bind(this),this.isXAxisChanged=!1,this.isYAxisChanged=!1,this.isDataChanged=!1,this.getColumns=this.getColumns.bind(this)}return s(t,e),n(t,[{key:"initialize",value:function(){var e=this,t=this.sessionData.dataSourceWatcher.target;if(t){var i={bindto:l["default"].findDOMNode(this),padding:this.props.padding?this.props.padding:{},size:this.props.size?this.props.size:{},data:{x:"x",y:"y",columns:[],type:"scatter",selection:{enabled:!0,multiple:!0,draggable:!0},onselected:function(){var t=this.selected();if(console.log("From c3 Selection selectedPoints Key",t),t.constructor===Array){var i=t.map(function(t){return e.hook.chart.yIndexToKeyColumn[t.index]});console.log("From c3 Selection Multiple Key",i),e.props.onSelect.callback.call(this,i)}else console.log("From c3 Selection Single Key",e.hook.chart.yIndexToKeyColumn[t.index]),e.props.onSelect.callback.call(this,e.hook.chart.yIndexToKeyColumn[t.index])},onmouseover:function(t){console.log("From c3 Probe Key",e.hook.chart.yIndexToKeyColumn[t.index]),e.props.onProbe.callback.call(this,e.hook.chart.yIndexToKeyColumn[t.index])}},axis:{x:{label:this.state.xAxis,tick:{fit:!1}},y:{label:this.state.yAxis}},onmouseout:function(){WeaveAPI.globalHashMap.getObject("selectionKeys").setSessionState([])},legend:{show:!1}};this.hook.chart=h["default"].generate(i)}else console.warn("No Data Found")}},{key:"componentDidMount",value:function(){this.initialize(),WeaveAPI.SessionManager.getCallbackCollection(this.sessionData.dataSourceWatcher).addGroupedCallback(this,this._setData,!0),this.sessionData.xAxis.addImmediateCallback(this,this._setXAxis),this.sessionData.yAxis.addImmediateCallback(this,this._setYAxis)}},{key:"_setXAxis",value:function(){this.isXAxisChanged=!0,this.setState(this.sessionData.getXAxisState())}},{key:"_setYAxis",value:function(){this.isYAxisChanged=!0,this.setState(this.sessionData.getYAxisState())}},{key:"_setData",value:function(){this.isDataChanged=!0,this.hook.chart||this.initialize(),this.setState(this.sessionData.getDataSourceState())}},{key:"getColumns",value:function(e,t){this.hook.chart.keyColumnToYIndex={},this.hook.chart.yIndexToKeyColumn={};var i=this.sessionData.dataSourceWatcher.target.data.getSessionState(),a=!1;i[0].hasOwnProperty("index")||(console.warn("Its a good practise to set key column. failing to do so, will create a index as key column"),a=!0);var o=[[],[]],s=this.sessionData.keyColumn.value=this.sessionData.keyColumn.value?this.sessionData.keyColumn.value:"index";return console.log("Key Column:",s),o[0].push("x"),o[1].push("y"),i.forEach(function(i,n){o[0].push(i[e]),o[1].push(i[t]),a&&(i.index=n),this.hook.chart.keyColumnToYIndex[i[s]]=n,this.hook.chart.yIndexToKeyColumn[n]=i[s]}.bind(this)),console.log(o),o}},{key:"componentDidUpdate",value:function(e,t){if(this.hook.chart&&(this.isXAxisChanged||this.isYAxisChanged||this.isDataChanged)){this.hook.chart.axis.labels({x:this.state.xAxis,y:this.state.yAxis});var i=(this.sessionData.dataSourceWatcher.target.data.getSessionState(),this.getColumns(this.state.xAxis,this.state.yAxis));this.hook.chart.load({columns:i}),this.isXAxisChanged=!1,this.isYAxisChanged=!1,this.isDataChanged=!1}}},{key:"componentWillUnmount",value:function(){this.sessionData.xAxis.removeCallback(this._setXAxis),this.sessionData.yAxis.removeCallback(this._setYAxis),this.sessionData.dataSourceWatcher.dispose()}},{key:"render",value:function(){var e=this.sessionData.dataSourceWatcher.target;return e?l["default"].createElement("div",{className:"Chart"}," "):l["default"].createElement("div",{className:"Chart"}," ",l["default"].createElement("h2",null," No Data ")," ")}}]),t}(l["default"].Component);e.exports=u},function(e,t){e.exports=a}])});
//# sourceMappingURL=asme-adapter.min.js.map
